{
  "version": 3,
  "sources": ["../../../../src/handlers/getAppointments.ts"],
  "sourcesContent": ["import { APIGatewayProxyHandler } from 'aws-lambda';\r\nimport { DynamoDB } from 'aws-sdk';\r\n\r\nconst isOffline = process.env.IS_OFFLINE === 'true';\r\n\r\nconst dynamoDb = new DynamoDB.DocumentClient({\r\n  endpoint: isOffline ? 'http://localhost:8000' : undefined,\r\n  region: 'us-east-1',\r\n  accessKeyId: 'fakeMyKeyId',\r\n  secretAccessKey: 'fakeSecretAccessKey',\r\n});\r\n\r\nexport const handler: APIGatewayProxyHandler = async (event) => {\r\n  try {\r\n    const insuredId = event.pathParameters?.insuredId;\r\n\r\n    if (!insuredId) {\r\n      return { statusCode: 400, body: JSON.stringify({ message: 'Missing insuredId' }) };\r\n    }\r\n\r\n    const result = await dynamoDb.query({\r\n      TableName: 'Appointments',\r\n      IndexName: 'InsuredIdIndex',\r\n      KeyConditionExpression: 'insuredId = :insuredId',\r\n      ExpressionAttributeValues: {\r\n        ':insuredId': insuredId,\r\n      },\r\n    }).promise();\r\n\r\n    return {\r\n      statusCode: 200,\r\n      body: JSON.stringify(result.Items),\r\n    };\r\n  } catch (err) {\r\n    console.error('Error in getAppointments handler:', err);\r\n    return { statusCode: 500, body: JSON.stringify({ message: 'Internal server error' }) };\r\n  }\r\n};\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,qBAAyB;AAEzB,IAAM,YAAY,QAAQ,IAAI,eAAe;AAE7C,IAAM,WAAW,IAAI,wBAAS,eAAe;AAAA,EAC3C,UAAU,YAAY,0BAA0B;AAAA,EAChD,QAAQ;AAAA,EACR,aAAa;AAAA,EACb,iBAAiB;AACnB,CAAC;AAEM,IAAM,UAAkC,OAAO,UAAU;AAC9D,MAAI;AACF,UAAM,YAAY,MAAM,gBAAgB;AAExC,QAAI,CAAC,WAAW;AACd,aAAO,EAAE,YAAY,KAAK,MAAM,KAAK,UAAU,EAAE,SAAS,oBAAoB,CAAC,EAAE;AAAA,IACnF;AAEA,UAAM,SAAS,MAAM,SAAS,MAAM;AAAA,MAClC,WAAW;AAAA,MACX,WAAW;AAAA,MACX,wBAAwB;AAAA,MACxB,2BAA2B;AAAA,QACzB,cAAc;AAAA,MAChB;AAAA,IACF,CAAC,EAAE,QAAQ;AAEX,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,MAAM,KAAK,UAAU,OAAO,KAAK;AAAA,IACnC;AAAA,EACF,SAAS,KAAK;AACZ,YAAQ,MAAM,qCAAqC,GAAG;AACtD,WAAO,EAAE,YAAY,KAAK,MAAM,KAAK,UAAU,EAAE,SAAS,wBAAwB,CAAC,EAAE;AAAA,EACvF;AACF;",
  "names": []
}
